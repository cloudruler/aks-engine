#cloud-config

write_files:
- path: /opt/azure/needs_azure.json
  permissions: "0644"
  owner: root
  content: |
    #EOF


- path: /opt/azure/containers/provision_source.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/7RXb2/bvhF+z09xP9XIH/wqO+62IEXhAqqtNFoc25PtdFsRCLJ0sonIpEJS+dMk332gZCmyrTRut70TH/GOz909PJLv/mjNKGvNfLkgtut6p07f9r5Zk+6ZN3Eu7OF00jkGQiQqMO8JjeA7mBG0eKJa/o9UYCvgTPmUoZCtRPBbKilnzYAvkxgVwtUnUAtkBADvqYIjElFCMFhwaByEvsLD942DBZeK+Us8fA9S+UIFqVR8KQNBEwWfP2drLQmJuAAKlEHjQOINtOEvx0dHh58g5AQgJybfIuZJnooAm3JRYQYwF5iAeXoD++/O7P7Idsf28HT/F5zt7cFMoH9NACJa0GlQMPEmo7m2WpaJY52SWGKGyBgxgXZuHXKGRGIIJgWjVSHUCo3dKZH86xcMAs4iOk8FeolAgTcplVShJOTOp8qLuPAiGmMeTvtNv5RJ5cex1Nl5eipi3pFUxZgQZDIVaI0u/g3G7VHzb822QfDWj8FoHPjJ8gdo7YIZHhrkN7nmkf8e1RfbfJP8eU/sSbfnjWzb9bq2O+k0DnK9P67jzqnTtSb2+BmeIEgVmOH+9329tz68AFcZ0H4B3mdA4+BgMOzZnjPo2f+EP6F9eHhYWfXc/lfdoiPXubQmtv79P1t01RaIokv0lqgEDcDoFkKywiVlU4nCgGAL27CJ0Wdp0i1SHBoQaGhagQhArdHX0bQn6C0KWRq9QNqIkMuzntcffh1n7W1kTc46lbreLkJzpbiycZWdrrFlWtnL22wqfJ2lP0e5HUeOE4DTab/vOYPxxOr3Pdf+x9Rx7V4n8nVXWLUGzeI7NB6dsXd51nuGTgeUSBGutvpJ++S4aD71frVd1n0Ln9Mv08Fk6rl237bGdubbaJ80j/5qVN3TCPxEQUylArNIE4bwlDfN/WAhOHvYr9Cp10I3m1cRQg5sW9jZdi+mY2WUx1cJYTjWpBurQIZjb2Bd2FXyNY6tNKSqVzjORxs+/+hA47RvTbqWu+10zeUqHRd89mBAZUAqHk0GjccLazyxXU9voGe4utLnhf71AxqP3eH4Yjj2pq7zXKUexNRTnMcdI+TBNQpDC3kjIidf0VZBWC6vB9AorDMepM5ogOqOi+tRnM4pK63X0HrD83SGMSqLhforUHFpvPVn56S+IgJ31C0K5Y66r0pFcFYKRXCWxbwuQoG+Qk3qwmc0Qql6VPekOpj8l3WrV7+uykYjLKA3pFI6rql/6X6MgUAlK95XSF7//1NAG8EUPWvNwMUlv13NFuW3plVTyV6u9FUt89GmfEsG5yfVeM9P5GsTuwOn2nYGzk7prvFlhSFn5aL5aHPmN0FzSeUmBtytA3lBNoPKw1/tnyL+1bB26t95KpgfF1NXw50CoxHoc1HfXeYKofF4Pv1iuwN7Yo+9S9sdO8PBM7Sb7eOf782+P8N4wEN9wuEGUr0F/1xcta5ztWD5XbirS9mJ1Oeq4PEo9hmWqVuHy/dBBK1bX7REyloCZ5wrM7vnCgzhVU4uJrEfYF5uh1GlhbwBVe/ydWfOSjhYGZWHmVhmvFAFLV9fSRLV1AJrhq2PHxMUlIc0+L0Db5SKOVqJMvQJ7s1ReYlGwE/8YIEfzFTRWMJeJsliRproV5luCynzlUIWYuilyVz4IRLyC1lUwg/QoyziOoV6lruaZICRm2VXEn2ulS9QMAMw5CJVIb9jYApow57xcg16M3zQkS59cf3N6lOW3ltzZApStuBxCHt5ytdvVju4bKVStGI6K8sjH6TCZdgMfRo/ZG53Wbd8+BrdsQ0RZVQuMASZBgFKGaVx/GD85GWMLKx/Fy+vQyrATOpfKrqSiqfBYucnO0kk+Ol9dHcHnys25UQzkc2Yz2GPkNWTnryzh6fkPwEAAP//qIoovkkQAAA=

- path: /opt/azure/containers/provision_installs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision_configs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /etc/systemd/system/kubelet-monitor.service
  permissions: "0644"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/zSOQUvDQBCF7/MrFjy3acWDlz1UjFQQKklFMOQw3UzN0M2s7Exq8++Fxt6+gXnvfc2HsLXwTBoy/xgn8ehmdtajudBTOKk7jQeKZK4njNY7lM5lUsNs6vjohKijDjZHo+z/f5dK+cyBoKlnaKGUM+ckA4n5bbl522+/3nfV3q9X9w+PUM2FHuMvTno7awp+vYKKBmS5DpQXNj+RQnmhUF8jxai5iClgLA4sxWy5GJKwpbzU/uYPzauoYYwtfKIYdU+TH8ZovBiV8tIwf5PBXbl7gb8AAAD//3MkF98aAQAA
- path: /usr/local/bin/health-monitor.sh
  permissions: "0544"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/6xW0W7bNhR951fcqMLQPsi0UqDd3ClAUBiLsS4NbGcPKwpDoa4rwhIpkJTbVNG/DxRl2YodJ0uWl1jCOefee3hI6tUJLbWiN1xQFGu4iXVKtCwVQ6CyMDT+WSqkTAoTc4FK00LJNddcioWDDXRKiEYDgQQhS6HRbB4LXuAy5hkhHX+hSmF4jotcCm6k4uLb6zdQEQCdIRbwdjgEApBJFmfAFF+IOMfI86uPny/n55PL8XQxvb6cT/4aj4JEshWq2gOWJ5HnnqDQHgHgS/jyBQ6waogi8Lp2Eg++fv0AJkVBAMApMaMgELD6VQ+4hO3okDXaS04IwPeUZwhGlfgBEtmQ+RJOwA4nSwPvhuBXLE9qOKMJrqkos2ynEACyVIL3caMOrTGW1Y5dgzUPkxOvpTiLwsah/16wc2Wj31jhbLtng/srVjzLIJhN/rieTUNwyKQDLPlR4Qc9Pii+RR/S17faYM5MBo4V2H/B91RGecwFeDueeVtS49a7zq3Wr60W10HMDF/3PN9rdIvXJlZmF7vfavsDM429NfP8avZpPL5aNBl0PTbYRAokNSGr8gYzNE/aFnn8Y6GRSZHoKByCLE1RmsjztgAnsnBpLlUGQQ5+tcOrIVhCoCGYQWpMMaI0PH0/GA6Gg3DkVxfj80/zi3+uPk/nNU0xzkz60zuS+bYD/7Vf7ZSu4fTsl/DNfuh9h+/tgz/d/MA1lMKVvD2e+6cX3ctPa/ZzktJSH03J/RIvTwgalvw/8UCRFJILE3l27fWIUr+6mk7+Pp+PF5OrenT69v1vR8PU5OZApAIWM1QGKBpGrQNKoEFN7UtNWTxgyljUwxg7JMs4CtNiV3j7ONSC/GozVk3XpzSPWcoF6mfE9omJtfVfHtdHkmqLPCemlvdoRnviLw9oewm8gkAghLtnvjPsWsffcATOraA1YaBT+L07/IP2Erxrt8+dbfHM1sIf3EBI7N277SIKh4TJvJAChYn8kLhCs24HusC0JWG7eWAplT3IN9za69rfedm/xja99W6zY981BLMHNNvpekr7F8DDfOtKj3zvbCDt4jk7Lg5O30n25bkGIQ3osiikMs23x5KTfwMAAP//B/dbSSUKAAA=

- path: /etc/systemd/system/kubelet.service
  permissions: "0644"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/3SPwU4CMRCG730KQrgujdFrDwLFEAgQVuIBCZntjjKhtNiZImh8d4OCenFOk8n/fZl/MQ8kS9VDdol2QjGYYa7Qo6huDDWdLlOQtT0QCxudOWkfHXhdUdCbc3SGL5kSsqmj22BqM6Y9OVRqUX5vSzVDFkhiwL/CkZUNe0oxbDFInzwajeJ0jU+Qvfxoy+wcMtsDSSkgmc3VzbWyB3TlyTVNaL7eqIDXDR13ouEtJ9QuBgEKmPiiavP6l/unReNRNc5TFCHWWHio0LNptt6H844d2fvVeNKzq9Ftx47Kj+YfoHUJdCfj/uBOLQaBBbxfqgcIgnXnaLbZCxWZMbUF0jOK+gwAAP//xbtnxXwBAAA=
- path: /etc/systemd/system/docker-monitor.service
  permissions: "0644"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/zSOwUrDQBCG7/sUC56T6APsoeoKOZhC0uIhBBk3UzN0Myuzk9q8vdDY2zcw//f//ZFJB/OKOQj9KCV2YDe2OoHaMGE4ZzumcEaxE0LUyQKPVjAriGZLJ8uII45md1IUt72WGeVCAU3fbTCYdks4iL+w5vvZYXBPj6bFGYhvBn8ldStm4/lCknhGVveybw67uvHtZ3tsDvW7/+8x/oqhu3mrJUsVU4BYfRFX29ZiTkyapMyTDYkViFEKWVhpRtPXnBViHMwHsOL4vLp5iUrFklFKBflGNQ9+/2b+AgAA//9HkzLkKQEAAA==

- path: /etc/apt/apt.conf.d/99periodic
  permissions: "0644"
  owner: root
  content: |
    APT::Periodic::Update-Package-Lists "0";
    APT::Periodic::Download-Upgradeable-Packages "0";
    APT::Periodic::AutocleanInterval "0";
    APT::Periodic::Unattended-Upgrade "0";

- path: /etc/systemd/system/docker.service.d/exec_start.conf
  permissions: "0644"
  owner: root
  content: |
    [Service]
    Restart=always
    ExecStart=
    ExecStart=/usr/bin/dockerd -H fd:// --storage-driver=overlay2 --bip=172.17.0.1/16
    ExecStartPost=/sbin/iptables -P FORWARD ACCEPT
    #EOF

- path: /etc/docker/daemon.json
  permissions: "0644"
  owner: root
  content: |
    {
        "live-restore": true,
        "log-driver": "json-file",
        "log-opts": {
            "max-size": "50m",
            "max-file": "5"
        }
    }



- path: /etc/sysctl.d/11-aks-engine.conf
  permissions: "0644"
  owner: root
  content: |
    net.core.message_burst = 80
    net.core.message_cost = 40
    net.core.somaxconn = 16384
    net.ipv4.neigh.default.gc_thresh1 = 4096
    net.ipv4.neigh.default.gc_thresh2 = 8192
    net.ipv4.neigh.default.gc_thresh3 = 16384
    net.ipv4.tcp_max_syn_backlog = 16384
    net.ipv4.tcp_retries2 = 8
    #EOF

- path: /etc/kubernetes/certs/ca.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUU2RENDQXRDZ0F3SUJBZ0lRZjlIU2YzZzc2d2FReS9pTmp2RDJsakFOQmdrcWhraUc5dzBCQVFzRkFEQU4KTVFzd0NRWURWUVFERXdKallUQWdGdzB5TVRBME1EY3lNVFV4TkRGYUdBOHlNRFV4TURNek1USXhOVEUwTVZvdwpEVEVMTUFrR0ExVUVBeE1DWTJFd2dnSWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUNEd0F3Z2dJS0FvSUNBUUN6CkEwNlNIeWJGdVd6bmJNWmpQQm92SENDRlFJaHpiaGZzZm5Pcmx1V1kveDF4R2VodWVUWDc2WWtKSE9hR05USWgKYlRndCthaWo2Rk1pRTJ2YUFzRmd1NHJEQzFzazdTQU9waVA5OGhUZFEwMDlrOUNWSDE3SDAyZnUyYjRGRDJoaQpLSUFHTEk4YTV4VGVBWFREdDNiQUU5U0pSdFNiTk90SGJ5K3BDMFdKLzNyVVgvTkp4a1Z2QUlncjNaTFBBdmpVCnJYU2tHMVpwR3FEN3RiWjFkTFp5YVVkd3lQYlVUUGowZTgxb2pyVmRORHJ5SmkyZnI5RmRjK21sVFIwRHJHRnQKZTV5QW8xZHgwQlhxYVpxTDZ6aS9MemRuNG9iTWt0YXZMVDE0STNQTWxzTUhQZVQrbkxyZFM4N3I2QjBMT3VFTwo3Q0c3bS8rOVdXeUIyVmpmRjBlNWR0TkpHY3ppa3NnWHFXa1lMck4wcVRBTkN4MHRHZVJhSXl3SWh0M2tuY0JhCkNSR1FISXIzVlpQU1hKUHpQbGQrVjVaUnFnTUd0Z2hsTjVXQkU3RjdubEYya0VmdXJYUnAyVE9hdTdoZ0pJaWoKTkMrR2Z4QW1OSUIzc2Q1Si9TL3RKTEkyRC8xT2YyY0hVQWRibzdOVG1JL1pwNFJZWEVtMGtHRnBVMEo2eldqbQpibmcvclNkaHJnMEEwZS8wRUg2VktNTlhSRGJPV3dqcnhqdUtzZlBxekE1RlVGdlE4NGE3REN1YUlxdUlTdGQxCm5ES2RHMGExMGYwM1d6amhBa3YzQURLKy9zcWtLWGlRQ0dTY3dQb1g5d3pPM3pzTGVQSVlaUlp4NkkrbThDcVYKU1NTdUJWNWN6RmZLRlBFWnJsYStla3lKczhtZFpXcitNbzErWnI2aWZRSURBUUFCbzBJd1FEQU9CZ05WSFE4QgpBZjhFQkFNQ0FxUXdEd1lEVlIwVEFRSC9CQVV3QXdFQi96QWRCZ05WSFE0RUZnUVVLaEl1Tlk2eHd0NjA0RjhCClRzMjJ1VXBzOFJ3d0RRWUpLb1pJaHZjTkFRRUxCUUFEZ2dJQkFIM1hYS01LNnFlRlFOb2wzWWl4T1A3cDBRbzIKdUpWWVc0aWQyeDZ3MGJiTFNzWHFTc1hoZHluKzNya0pldU0rOVVQdzFiNVh6bzRJdlNYT2lxRDhCQ1lOUGc1dAo1SEhxNWZ4eEkzSmhscEtJUTd6WnNwWkIvTm1kVHgwUzhKaTF3d1l0VzJjdnpBNGsyRkxVcTVpT3F2NXFoTEJUCnV1ejdJS3lCbW9ndWxJT0xSTmNZU2MrdlB6WnhBVmdrVGF0b0xlZnJuV1FHV2FGWkx2RVRTSlFLdE9TWVozNk4KdXBpd2E1K2lKTGl1b1ZQcFdkZTFwd05IQXJBRlJjem1aQlZCbDdxN2lEdDFiTi9pN3BrVXYvcmJPS241ajdkMwo4SjVQa0gyeGhNdkh5VG84WFFWWXZCbW80NTY4WFMvbTA4SFIvVHFndmZDRERQRDJRdU5OeUZsRmhxUVZhUzc2CkRWNlNUVnNXYkNxNTdwbzY1RHJ2cVVjdTM2ZmFlZ0oxL0EyVzRndzBOZC9hNjYxYzJNci9kOGJMeGlwbE90Mk8KZi9TMm5Fc2VCRnBQNkVXV1RZUDFCcTdyTEdlRjJMbHJZTm9SK2tpVVlDTnhQV0tjMHhYV2J4dk5JKzlRN3dabQpDaWY3amVCbzdXSkU4YlJkcmJubE93bzJUZ1N1cTd6dEFEWnl1eE9DUHNPYXRVdzJXdEhlbzRkbDRQNlVKVVdJCkc3c2xTQUZtVzV6MHUyRHpTN0FOeFVuOXlBK29BZ3pkMlpRYVBqSFF6TUhIRFBaZ3U2aXc2ZEU2dzFYdDVHUmcKQlc0am5OUXNkbitvcmhROFI4cVk2bEhlZmoxeFA2R1BOSXNvbDJ4azNHMXpzMW1qbTc4K3pqQ09Rc0ZYNnRodgppK29qYlRRZEZwMXFBS3JECi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K

- path: /etc/kubernetes/certs/client.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZHakNDQXdLZ0F3SUJBZ0lSQUlhVkkvWC9neGlFd1JCdXN3bXBYTjh3RFFZSktvWklodmNOQVFFTEJRQXcKRFRFTE1Ba0dBMVVFQXhNQ1kyRXdJQmNOTWpFd05EQTNNakUxTVRReVdoZ1BNakExTVRBek16RXlNVFV4TkRKYQpNQ294RnpBVkJnTlZCQW9URG5ONWMzUmxiVHB0WVhOMFpYSnpNUTh3RFFZRFZRUURFd1pqYkdsbGJuUXdnZ0lpCk1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQ0R3QXdnZ0lLQW9JQ0FRRGFTNE8rTkFMRWxRL2tOTEpTTWo2Z1EvZGsKbDV2Wnh3VlVxQUNsSjVDM1NhSnhGYWpvM3pkOFk5Q29pQWNNSGJGT2xQelA1bkNYMXJUbi9mdHRkRXM3cWpsaQpqYTlKS3ZYbFNyWVRLQitqR1VNRXV6ZEJTVExTOUI3T3VEd0gxWTlGejhtVmkzeWpZbHZNQjN6aWJJU0YyVlV1CmlTV2JCbHJMa0ZmUjU3SzVYWkFibG91STFxMjM0cSt3Sk94Q3Z0UThLMWhkL1UzYldrUmJXS1VXOXZiQytJSU0KNDlMOUV4MEI1Q1hjcUJJS1ZpUzJxMjA1eTc2SFdRVE5lWWR1eUpPUFdZWldxVmVhMjZBUEtmZUl3L1ZJbWszZApxUHBiVUtDVGM5TkV1TTUvMlJteHZnYnd2dE5Ma04vclBvZEZkUEoxVEdmVGpodG8xUWEwV1ZGZnBjOU42cmRqCmlzM1hkRHRuRzJTS2UzQ01ieE02NmdPdlpFUUg4WmI1eXhMMXFZYmh6ajhpMksxNWgyNEl2bEtxTy9BbWg5ZTYKcDVYNWErMEo2UEFhaFl6dVNXWTJiWHZUd056MDZ3c1RwOFA0MnBHSE5rT1Y1eXFLQUovdEI4MlM0eHpPUk1seQpyeTByc0VLK2xaNjlKejM3cTVUbFBaNXdVWFRMOTluRjVvVUdkRUdVV0RqUkRKdEpKSi9yQU5zWms0eDh6V2FKCngzTFlINVRqNzF6dkJqUVkxYmFaT1NsK2VPc2h1dktHR3JsbjI4MXJLalJKS1I0aFZiWTdFbmN3UFRrc254bmUKclBnQlZtSWw3ZThwM1puQ25wTEJzb2hMRWtiRjlJeWNIQmRHdXFGaTUwMEhuUjJXRHNZOTlpQXpXUzFtSHZVawpqdTBDUVZMY2EzUlQ1c0pPTHdJREFRQUJvMVl3VkRBT0JnTlZIUThCQWY4RUJBTUNCYUF3RXdZRFZSMGxCQXd3CkNnWUlLd1lCQlFVSEF3SXdEQVlEVlIwVEFRSC9CQUl3QURBZkJnTlZIU01FR0RBV2dCUXFFaTQxanJIQzNyVGcKWHdGT3piYTVTbXp4SERBTkJna3Foa2lHOXcwQkFRc0ZBQU9DQWdFQWxYa2FrZkdEMjF0eDgvaXNtZzVjK29RSwpvZG1jNGZsbmZxVWJvYzlwOSs1dnJGVkF0K05iNVY1azlFWlNxbUt3bkZKSGJoN0RTdWNDclFXSjBkK1JiUUNpCnRNQVVPM0dBZ2NncENWcjNxalcwaVA3cVJpaExHOUFjNEhqRWlJSWZ0Nk5DMHVvREdaU2RSaFN6Y2hRakpLazMKM2x2R0hiWlFYSUdMNXArOGxKOThYVUk2WnBCN3NlTzBhZVlyQ2Q3UnBVbEI4aWtwSURtSzNRZDZqZllVVTdhUgpKYWJBMGR0QzB1OVZaL3NlMDNEUXNlb0NVNURjV2hTamQ5UW5tcHMvSGFWWUtCVnVWMCswTXZOaFJPNElYWXB4Ck5VcmxTQUdsb2RjL2V4WFg2YjdqRmJaNEY5T3lRWHBOR20ydnlycXRDTlJnY0hLWld4MlBYZ3ZUR3dDaUVXVnoKNzllRFBLdXZ4M0RTdHpWUHFkdXJMdjR3anlDc09ZZEZGeHdXVUNBSTZzODVDdGI3SzB1eFlPYUsrN2RtZUZiaAppaElrTHZzZm91SVl0ellXRGx5R09NZ2xhSmpEdlE5YTIrNm1FQkRtaW9RYjlXL3FMUkRiTHZ6OXY2cHZyeFhECmVFTkZMQ3RvTzBWbks5NGNFcVZwMDdET3Uvd2hGV2ZyQmt0N1EzS0NRQS82K1lCeFZWaUFKbEkyRGU1NlJWbysKS3BkWS9pY1B2NUlVSU4zUHNod0doK1RDcmFvN082a2YwTkpQeE5lNHc1aHFOUW95TEkzRUIwTTRmMHFEb1NjTQozSW1JNW9sT3drRExNNEh1TGp2SURWNHYycDVlcWZkeW9lT1hEelNmeHJkV0FMaUVIdnFPakN4UDV6bGNGT0dlCjFBbUhRKzloalltMWFaUFk0d2M9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K

- path: /var/lib/kubelet/kubeconfig
  permissions: "0644"
  owner: root
  content: |
    apiVersion: v1
    kind: Config
    clusters:
    - name: localcluster
      cluster:
        certificate-authority: /etc/kubernetes/certs/ca.crt
        server: https://10.255.255.5:443
    users:
    - name: client
      user:
        client-certificate: /etc/kubernetes/certs/client.crt
        client-key: /etc/kubernetes/certs/client.key
    contexts:
    - context:
        cluster: localcluster
        user: client
      name: localclustercontext
    current-context: localclustercontext
    #EOF

- path: /etc/default/kubelet
  permissions: "0644"
  owner: root
  content: |
    KUBELET_CONFIG=--address=0.0.0.0 --anonymous-auth=false --authentication-token-webhook=true --authorization-mode=Webhook --azure-container-registry-config=/etc/kubernetes/azure.json --cgroups-per-qos=true --client-ca-file=/etc/kubernetes/certs/ca.crt --cloud-config=/etc/kubernetes/azure.json --cloud-provider=azure --cluster-dns=10.0.0.10 --cluster-domain=cluster.local --enforce-node-allocatable=pods --event-qps=0 --eviction-hard=memory.available<750Mi,nodefs.available<10%,nodefs.inodesFree<5% --feature-gates=RotateKubeletServerCertificate=true --healthz-port=10248 --image-gc-high-threshold=85 --image-gc-low-threshold=80 --image-pull-progress-deadline=30m --keep-terminated-pod-volumes=false --kubeconfig=/var/lib/kubelet/kubeconfig --max-pods=30 --network-plugin=cni --node-status-update-frequency=10s --non-masquerade-cidr=0.0.0.0/0 --pod-infra-container-image=mcr.microsoft.com/oss/kubernetes/pause:1.4.1 --pod-manifest-path=/etc/kubernetes/manifests --pod-max-pids=-1 --protect-kernel-defaults=true --read-only-port=0 --resolv-conf=/run/systemd/resolve/resolv.conf --rotate-certificates=true --streaming-connection-idle-timeout=4h --tls-cert-file=/etc/kubernetes/certs/kubeletserver.crt --tls-cipher-suites=TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_RSA_WITH_AES_256_GCM_SHA384,TLS_RSA_WITH_AES_128_GCM_SHA256 --tls-private-key-file=/etc/kubernetes/certs/kubeletserver.key --v=2 --volume-plugin-dir=/etc/kubernetes/volumeplugins 
    KUBELET_NODE_LABELS=kubernetes.azure.com/role=agent,agentpool=agentpool1,storageprofile=managed,storagetier=Premium_LRS,kubernetes.azure.com/cluster=aksengine
    #EOF

- path: /opt/azure/containers/kubelet.sh
  permissions: "0755"
  owner: root
  content: |
    #!/bin/bash
    MOUNT_DIR=/var/lib/kubelet
    mkdir -p $MOUNT_DIR /var/lib/cni
    if ! [[ $(findmnt -rno SOURCE,TARGET ${MOUNT_DIR}) ]]; then
      mount --bind $MOUNT_DIR $MOUNT_DIR
    fi
    mount --make-shared $MOUNT_DIR
    iptables -I FORWARD -d 168.63.129.16 -p tcp --dport 80 -j DROP
    #EOF
runcmd:
- set -x
- source /opt/azure/containers/provision_source.sh
- aptmarkWALinuxAgent hold
